---
name: health-check
description: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è Callwork —Å–∏—Å—Ç–µ–º—ã (—Å–µ—Ä–≤–µ—Ä, –ë–î, API endpoints, Telegram bot). –ò—Å–ø–æ–ª—å–∑—É–π –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
allowed-tools: Bash, Read, WebFetch
---

# Health Check Skill

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è Callwork —Å–∏—Å—Ç–µ–º—ã.

## –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Next.js —Å–µ—Ä–≤–µ—Ä–∞
2. –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç API endpoints
4. –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç Telegram bot (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω)
5. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## –®–∞–≥–∏

### 1. Environment Variables
```bash
echo "üîê –ü—Ä–æ–≤–µ—Ä—è—é .env —Ñ–∞–π–ª..."
if [ -f .env ]; then
  echo "‚úì .env —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"

  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
  grep -q "POSTGRES_URL=" .env && echo "‚úì POSTGRES_URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω" || echo "‚úó POSTGRES_URL –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
  grep -q "NEXTAUTH_SECRET=" .env && echo "‚úì NEXTAUTH_SECRET –Ω–∞—Å—Ç—Ä–æ–µ–Ω" || echo "‚úó NEXTAUTH_SECRET –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
  grep -q "NEXTAUTH_URL=" .env && echo "‚úì NEXTAUTH_URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω" || echo "‚úó NEXTAUTH_URL –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç"
else
  echo "‚úó .env —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω!"
fi
```

### 2. Database Connection
```bash
echo "üóÑÔ∏è  –ü—Ä–æ–≤–µ—Ä—è—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î..."
npx prisma db execute --stdin <<< "SELECT 1" && echo "‚úì PostgreSQL –¥–æ—Å—Ç—É–ø–Ω–∞" || echo "‚úó –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î"
```

### 3. Next.js Server
```bash
echo "üåê –ü—Ä–æ–≤–µ—Ä—è—é Next.js —Å–µ—Ä–≤–µ—Ä..."
if lsof -i:3000 > /dev/null 2>&1; then
  echo "‚úì –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000"

  # –ü—Ä–æ–≤–µ—Ä—è–µ–º health endpoint
  curl -s http://localhost:3000/api/health > /dev/null && echo "‚úì API –¥–æ—Å—Ç—É–ø–µ–Ω" || echo "‚úó API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç"
else
  echo "‚úó –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω (–ø–æ—Ä—Ç 3000 —Å–≤–æ–±–æ–¥–µ–Ω)"
fi
```

### 4. Prisma Client
```bash
echo "üîß –ü—Ä–æ–≤–µ—Ä—è—é Prisma Client..."
if [ -d "node_modules/.prisma/client" ]; then
  echo "‚úì Prisma Client —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω"
else
  echo "‚úó Prisma Client –Ω–µ –Ω–∞–π–¥–µ–Ω (–∑–∞–ø—É—Å—Ç–∏: npx prisma generate)"
fi
```

### 5. TypeScript Compilation
```bash
echo "üìù –ü—Ä–æ–≤–µ—Ä—è—é TypeScript..."
npx tsc --noEmit && echo "‚úì –¢–∏–ø—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã" || echo "‚úó TypeScript errors"
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∑–¥–æ—Ä–æ–≤–∞:
```
‚úì .env –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úì PostgreSQL –¥–æ—Å—Ç—É–ø–Ω–∞
‚úì Next.js —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç (port 3000)
‚úì API endpoints –æ—Ç–≤–µ—á–∞—é—Ç
‚úì Prisma Client –∞–∫—Ç—É–∞–ª–µ–Ω
‚úì TypeScript –±–µ–∑ –æ—à–∏–±–æ–∫
```

### ‚ùå –ù–∞–π–¥–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:
```
‚úó POSTGRES_URL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
‚úó –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω
‚úó API timeout (–ø—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏)
‚úó Prisma Client —É—Å—Ç–∞—Ä–µ–ª (–∑–∞–ø—É—Å—Ç–∏ prisma generate)
```

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ .env
- –ü–æ—Å–ª–µ git pull
- –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
- –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ü—Ä–∏ debugging —Å—Ç—Ä–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
- –ü–æ—Å–ª–µ deployment

## Quick Fix –∫–æ–º–∞–Ω–¥—ã

```bash
# –ï—Å–ª–∏ Prisma Client —É—Å—Ç–∞—Ä–µ–ª
npx prisma generate

# –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω
npm run dev

# –ï—Å–ª–∏ –Ω–µ—Ç .env
cp .env.example .env
# –ó–∞—Ç–µ–º –∑–∞–ø–æ–ª–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é
```
